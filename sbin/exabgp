#!/bin/sh

dirname=`dirname $0`

if [[ $dirname == /* ]]; then
        path=$dirname/..
else
        cd `pwd`/$dirname/.. > /dev/null
        path=`pwd`
        cd - > /dev/null
fi

export PYTHONPATH=$path/lib:/usr/share/exabgp
export ETC=$path/etc/exabgp

PYTHON=`which python`
PYPY=`which pypy`

if [ -f "$PYPY" ]
then
	INTERPRETER=$PYPY
elif [ -f "$PYTHON" ]
then
	INTERPRETER=$PYTHON
else
	INTERPRETER=python
fi

APPLICATION=`python -c "import sys,os; ';'.join(_ for _ in sys.path if os.path.isfile('/'.join((_,'application.py'))))"`

$INTERPRETER -m exabgp.debug $APPLICATION $*
